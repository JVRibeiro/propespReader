$(".mdl-layout__drawer-button").removeAttr("tabindex");var cameraId=0,isCameraTabActive=!0,logIsEnabled;scanner={};
var qrScan={data:[],initHtmlElement:function(a){return document.getElementById(a)},enableLog:function(a){localStorage.setItem("enableLog",JSON.stringify(a));(logIsEnabled=a)?$(".mdl-layout__tab.log, #scroll-tab-3").show():$(".mdl-layout__tab.log, #scroll-tab-3").hide()},log:function(a){"object"===typeof a&&(a=JSON.stringify(a));a=a.replace(/\x22(.*?)\x22/gi,"<span class='red'>\"$1\"</span>");a=a.replace(/(null|true|false|undefined)/gi,"<span class='purple'>$1</span>");a=a.replace(/(\{|\}|\[|\]|:|,|\.)/gi,
"<span class='grey'>$1</span>");document.getElementById("log").innerHTML+=a+"<hr>"},initVideoObjectOptions:function(a){scanner={};return{video:qrScan.initHtmlElement(a),continuous:!0,mirror:!1,captureImage:!1,backgroundScan:!1,refractoryPeriod:5E3,scanPeriod:1}},initAvaliableCameras:function(a){Instascan.Camera.getCameras().then(function(b){a()})},initCamera:function(a){scanner.stop();Instascan.Camera.getCameras().then(function(a){if(0<a.length){var b=a[0];$.each(a,function(a,c){if(-1!=c.name.indexOf("back"))return b=
c,!1});console.log(b);qrScan.log("Camera: "+JSON.stringify(b));scanner.start(b)}else alert("Nenhuma camera encontrada.")})},scanStart:function(a){scanner.addListener("scan",function(b){a(b)})},initScanner:function(a){scanner=new Instascan.Scanner(a)},saveScannedData:function(a){a.replace(/\n/gi,"<br>");console.log("Dados lidos: "+a);var b=a.replace(/\n/gi,""),b=b.replace(/\\"/g,'"');console.log("Dados processados: "+b);qrScan.log("Dados processados: "+b);b.match(/^\x7b\"\x70\x72\x6f\x70\x65\x73\x70\"\: \x7b(.*)\x7d\x7d/g)?
(qrScan.animate._snap(),qrScan.animate._success(),qrScan.data.push(JSON.parse(a)),a=JSON.stringify(qrScan.data),console.log("Dados salvos em RAM: "+a),a=eval(function(a,b,c,e,d,f){d=function(a){return(a<b?"":d(parseInt(a/b)))+(35<(a%=b)?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){for(;c--;)f[d(c)]=e[c]||d(c);e=[function(a){return f[a]}];d=function(){return"\\w+"};c=1}for(;c--;)e[c]&&(a=a.replace(new RegExp("\\b"+d(c)+"\\b","g"),e[c]));return a}('1a k=["\\11\\14\\n\\X\\o\\p\\9\\j\\9\\r\\9\\t\\9\\j\\9\\m\\9\\D\\9\\j\\9\\l\\9\\A\\9\\v\\9\\N\\9\\G\\9\\10\\p\\x\\p\\9\\m\\9\\I\\9\\17\\9\\r\\9\\H\\9\\j\\9\\l\\p\\x\\p\\9\\1b\\9\\1e\\9\\C\\p\\q\\Y\\Z\\o\\n\\o\\E\\q\\q\\o\\n\\o\\F\\q\\q\\12\\13\\x\\n\\o\\s\\q\\15","\\h","\\18\\y\\C\\H\\z","\\h\\h\\h\\i\\l\\s\\h\\1f\\s\\i\\A\\l\\v\\l\\h\\i\\l\\E\\h\\i\\m\\r\\h\\i\\l\\n\\h\\i\\j\\j\\h\\i\\l\\j\\h\\i\\m\\1g\\h\\i\\m\\D\\h\\i\\j\\E\\h\\i\\j\\s\\h\\i\\j\\F\\h\\M\\t\\B\\h\\i\\m\\O\\h\\i\\m\\j\\h\\i\\l\\D\\h\\i\\n\\F\\h\\i\\n\\r\\h\\i\\r\\j\\h\\P\\B\\Q\\y\\z\\R\\S\\T\\h\\t\\v\\z","\\B\\G\\y\\C\\t\\v\\G","","\\9\\U\\V","\\9\\A","\\I"];W(u(b,c,d,e,f,g){f=u(a){w a.16(c)};J(!k[5][k[4]](/^/,19)){K(d--){g[f(d)]=e[d]||f(d)};e=[u(a){w g[a]}];f=u(){w k[6]};d=1};K(d--){J(e[d]){b=b[k[4]](1c 1d(k[7]+f(d)+k[7],k[8]),e[d])}};w b}(k[0],L,L,k[3][k[2]](k[1]),0,{}))',
62,79,"         x5C        x7C x78 x33 _0x75df x37 x36 x34 x5B x22 x5D x35 x30 x61 function x63 return x2C x70 x74 x62 x72 x6C x39 x32 x31 x65 x69 x67 if while 24 x76 x64 x45 x43 x79 x6F x4A x53 x77 x2B eval x3D x3B x6D x38 x66 x28 x6E x20 x29 toString x68 x73 String var x6A new RegExp x6B x5F x46".split(" "),0,{})),console.log("Dados codificados: "+a),localStorage.setItem("data",a)):(qrScan.animate._snap(),qrScan.animate._error(),console.log("QR Code inv\u00e1lido! Escaneie um QR Code pertencente \u00e0 PROPESP."),
qrScan.log("QR Code inv\u00e1lido! Escaneie um QR Code pertencente \u00e0 PROPESP."))},animate:{_snap:function(){document.getElementById("cameraCanvas");$("#cameraCanvas").addClass("snap-anim").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(a){$("#cameraCanvas").removeClass("snap-anim")})},_success:function(){$(".success").hasClass("snap-status-out")?$(".success").removeClass("snap-status-out").addClass("snap-status-in"):$(".success").addClass("snap-status-in");setTimeout(function(){$(".success").removeClass("snap-status-in").addClass("snap-status-out")},
3E3)},_error:function(){$(".error").hasClass("snap-status-out")?$(".error").removeClass("snap-status-out").addClass("snap-status-in"):$(".error").addClass("snap-status-in");setTimeout(function(){$(".error").removeClass("snap-status-in").addClass("snap-status-out")},3E3)}}};null===localStorage.getItem("enableLog")||"false"===localStorage.getItem("enableLog")?qrScan.enableLog(!1):"true"===localStorage.getItem("enableLog")&&qrScan.enableLog(!0);var options={},options=qrScan.initVideoObjectOptions("webcameraPreview");
qrScan.initScanner(options);qrScan.initAvaliableCameras(function(){cameraId=1});qrScan.initCamera(cameraId);qrScan.scanStart(function(a){qrScan.saveScannedData(a)});
$(".mdl-layout__tab").on("click",function(){this.href.match("#scroll-tab-1")&&!isCameraTabActive?(console.log("Camera activated."),isCameraTabActive=!0,qrScan.initCamera(cameraId)):!this.href.match("#scroll-tab-1")&&isCameraTabActive&&(console.log("Camera deactivated."),isCameraTabActive=!1,scanner.stop());this.href.match("#scroll-tab-3")&&setTimeout(function(){document.querySelector(".mdl-layout__content").scrollTop=document.querySelector(".mdl-layout__content").scrollHeight},100)});
